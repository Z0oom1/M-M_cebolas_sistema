<header class="top-bar">
    <div>
        <h2 class="page-title">Dashboard</h2>
        <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 4px;">Bem-vindo ao painel de controle da M&M Cebolas.</p>
    </div>
    <div style="display: flex; gap: 12px; align-items: center;">
        <div class="status-indicator" style="display: flex; align-items: center; gap: 8px; background: #f0fdf4; padding: 8px 16px; border-radius: 100px; border: 1px solid #dcfce7; color: #166534; font-size: 0.75rem; font-weight: 700;">
            <span style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%; display: inline-block; animation: pulse 2s infinite;"></span>
            SISTEMA ONLINE
        </div>
        <div class="date-display">
            <i class="far fa-calendar-alt"></i> <span id="current-date">--/--/----</span>
        </div>
    </div>
</header>

<div class="kpi-grid">
    <div class="kpi-card main-stock">
        <div class="kpi-icon stock"><i class="fas fa-layer-group"></i></div>
        <div style="flex: 1;">
            <small>Estoque Total</small>
            <h3 id="dash-stock">0 Cx</h3>
            <div id="stock-breakdown" class="mini-stock-bar"></div>
        </div>
    </div>
    <div class="kpi-card">
        <div class="kpi-icon money"><i class="fas fa-dollar-sign"></i></div>
        <div><small>Receita (Mês)</small><h3 id="dash-revenue" class="text-success">R$ 0,00</h3></div>
    </div>
    <div class="kpi-card">
        <div class="kpi-icon expense"><i class="fas fa-file-invoice"></i></div>
        <div><small>Despesas</small><h3 id="dash-expenses" class="text-danger">R$ 0,00</h3></div>
    </div>
    <div class="kpi-card">
        <div class="kpi-icon profit"><i class="fas fa-coins"></i></div>
        <div><small>Lucro Líquido</small><h3 id="dash-profit">R$ 0,00</h3></div>
    </div>
</div>

<div class="content-grid">
    <div class="panel chart-panel">
        <div class="panel-header"><h4>Balanço Financeiro</h4></div>
        <div style="height: 250px; padding: 10px;"><canvas id="financeChart"></canvas></div>
    </div>
    <div class="panel chart-panel">
        <div class="panel-header"><h4>Distribuição de Estoque</h4></div>
        <div style="height: 250px; display:flex; justify-content:center; padding: 10px;"><canvas id="stockChart"></canvas></div>
    </div>
</div>

<div class="panel" style="margin-top: 20px;">
    <div class="panel-header">
        <h4>Últimas Movimentações</h4>
        <button class="btn-sm" onclick="showSection('estoque')">Ver tudo</button>
    </div>
    <div class="table-responsive">
        <table class="table-compact">
            <thead><tr><th>Tipo</th><th>Produto</th><th>Origem/Destino</th><th>Qtd</th><th>Valor</th><th>Data</th></tr></thead>
            <tbody id="recent-table-body"></tbody>
        </table>
    </div>
</div>
